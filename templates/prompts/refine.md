走り書きや断片的なメモを、読みやすく完全な形のメモとして再構成してください。

## 使用方法

### Claude Code
- エディタでテキストを選択後: `/memo.refine`
- ファイル全体を対象: `/memo.refine @filename`

### GitHub Copilot (VS Code)
- エディタでテキストを選択後: `/memo.refine`
- 変数を使用: `${selection}` で選択テキスト、`${file}` でファイル全体

## タスク
走り書きや簡潔すぎるメモを、文脈を推測して完全な形のメモに拡張・洗練してください。

## 入力
断片的な走り書きメモ（省略形、記号、箇条書きのみ、文脈が不足している内容など）
- Claude Code: 選択テキストまたは `@filename` で指定されたファイル
- GitHub Copilot: `${selection}` 変数で渡される選択テキスト

## 処理方針

### 1. 省略形・略語の展開
技術用語や一般的な略語を適切に展開してください。

**よくある省略形**:
- `lr` → 学習率 (learning rate)
- `bs` → バッチサイズ (batch size)
- `acc` → 精度 (accuracy)
- `val` → 検証 (validation)
- `cfg` / `config` → 設定 (configuration)
- `exp` → 実験 (experiment)
- `impl` → 実装 (implementation)
- `tmp` / `temp` → 一時的 (temporary)

### 2. 記号・短縮記法の解釈
- `->` → 「〜から〜へ」「〜の結果」
- `=>` → 「〜によって」「〜ならば」
- `@` → 「〜において」「〜で」
- `#` → タグまたは番号
- `!` → 重要、注意
- `?` → 不明、要確認
- `✓` / `x` → 完了/未完了

### 3. 文脈の補完
断片的な情報から文脈を推測して補完してください。

**補完の例**:
- 「resnet50 imagenet」→「ResNet50モデルをImageNetデータセットで学習」
- 「lr 0.001 → 0.0001」→「学習率を0.001から0.0001に変更」
- 「acc 95%」→「精度: 95%」
- 「試した。だめ」→「試行したが、期待した結果が得られなかった」

### 4. 構造化と整理
- 関連する情報をグループ化
- 適切な見出しを追加
- 箇条書きやテーブルで整理
- 時系列がある場合は順序を明確に

### 5. 情報の補完ルール
- **元の情報は削除しない**（重複を除く）
- 推測した内容は `[推測: ...]` と明示
- 不明確な部分は `[要確認]` でマーク
- 技術用語は正確な表記に修正

## 出力形式

構造化されたMarkdown形式のメモ。以下の要素を含む：

1. **適切な見出し構造** (#, ##, ###)
2. **完全な文章**（単語の羅列ではなく）
3. **箇条書きリスト**（整理された形で）
4. **テーブル**（比較や設定値がある場合）
5. **コードブロック**（コマンドや設定がある場合）
6. **次のステップ/TODO**（アクションが含まれる場合）

## 出力例

### 例1: 実験メモの走り書き

**入力**:
```
resnet50 imagenet
lr 0.001 bs 32 epochs 50
acc 94.5% -> lr 0.0001で試す
過学習っぽい dropout追加?
データ増強も
```

**出力**:
```markdown
# ResNet50 画像分類実験

## 実験設定
- モデル: ResNet50
- データセット: ImageNet [推測: 明示的な記載はないが文脈から判断]
- ハイパーパラメータ:
  - 学習率: 0.001
  - バッチサイズ: 32
  - エポック数: 50

## 実験結果
- 精度: 94.5%

## 観察された課題
- 過学習の傾向が見られる

## 次のステップ
- [ ] 学習率を0.0001に変更して再実験
- [ ] Dropout層の追加を検討（過学習対策）
- [ ] データ増強（Data Augmentation）の適用

## 備考
元の走り書きメモから構造化。推測箇所は明示済み。
```

### 例2: 会議メモの走り書き

**入力**:
```
mtg 2025/1/15
- api v2 実装
- 田中さん担当
- 期限: 月末
! セキュリティレビュー必須
? 認証方式どうする
```

**出力**:
```markdown
# プロジェクト会議メモ

**日時**: 2025年1月15日
**トピック**: API v2 実装計画 [推測: mtg → meeting]

## 決定事項

### API v2 実装
- **担当者**: 田中さん
- **期限**: 2025年1月31日 [推測: 「月末」→具体的な日付]

## 重要事項
- ⚠️ セキュリティレビューが必須

## 未解決の課題
- [ ] 認証方式の決定 [要確認]

## 次のアクション
- [ ] 認証方式について田中さんと相談
- [ ] セキュリティレビューのスケジュール調整
```

### 例3: 技術調査メモ

**入力**:
```
graphql vs rest
- graphql: 柔軟、over-fetching解決
- rest: シンプル、キャッシュ◎
結論: 小規模ならrest、複雑ならgraphql
next: protoで検証
```

**出力**:
```markdown
# API設計: GraphQL vs REST 比較調査

## 比較結果

| 項目 | GraphQL | REST |
|------|---------|------|
| データ取得の柔軟性 | 高い（必要なデータのみ取得可能） | 固定的 |
| Over-fetching | 解決できる | 発生しやすい |
| シンプルさ | 学習コストあり | シンプル |
| キャッシング | 複雑 | 優れている |

## 選択基準

- **小規模プロジェクト**: REST API を推奨
  - 理由: シンプルで実装・運用が容易

- **複雑な要件**: GraphQL を推奨
  - 理由: 柔軟なデータ取得、クライアントごとの最適化

## 次のステップ
- [ ] プロトタイプでの検証を実施 [推測: proto → prototype]
- [ ] 実際のユースケースに基づいた性能比較

## 備考
初期調査結果。実装前に要検証。
```

## 注意事項

### 推測のレベル
- **明らかな略語**: 注記なしで展開（lr → 学習率など）
- **文脈からの推測**: `[推測: ...]` と明示
- **不明確**: `[要確認]` でマーク

### 情報の保全
- 元の情報は削除しない
- 数値、日付、固有名詞は必ず保持
- 曖昧でも削除せず、マークして保持

### 文章の完全性
- 単語の羅列を完全な文章に
- 主語・述語を補完
- 適切な接続詞を使用

### 技術用語の扱い
- 正式名称を使用（resnet → ResNet、imagenet → ImageNet）
- 英語表記が標準的な用語は英語で
- 日本語訳を併記する場合もあり

## 特殊ケース

### 実験メモの場合
実験に関する走り書きの場合、以下の構造を推奨:
- 実験設定（パラメータ、環境）
- 結果（メトリクス）
- 観察・課題
- 次のステップ

### TODO/タスクリストの場合
TODO項目が含まれる場合:
- チェックボックス形式 `- [ ]` を使用
- 優先度が推測できる場合は明示
- 期限があれば明記

### 比較・検討メモの場合
複数の選択肢を比較している場合:
- テーブル形式で整理
- メリット・デメリットを明確に
- 結論または推奨事項を記載

### コードスニペット含む場合
コードや コマンドが含まれる場合:
- 適切な言語指定のコードブロックを使用
- 実行コンテキスト（環境、前提条件）を補足
- 期待される出力や結果を記載
